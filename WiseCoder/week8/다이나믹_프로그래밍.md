
# 다이나믹 프로그래밍(Dynamic Programming)
- 동적계획법
- 메모리 공간을 약간 더 사용하면 연산 속도를 비약적으로 증가시킬 수 있는 방법

<다이나믹 프로그래밍과 동적 할당의 다이나믹은 같은 의미?>
프로그래밍에서 다이나믹은 '프로그램이 실행되는 도중에'라는 의미이다. 예를 들어 자료구조에서 동적 할당(Dynamic Allocation)은 프로그램 실행 중에 프로그램 실행에 필요한 메모리를 할당하는 기법이다. 하지만 다이나믹 프로그래밍에서의 '다이나믹'은 이런 의미가 아니라는 것 정도만 기억하자

### 사용 가능 조건
1. 큰 문제를 작은 문제로 나눌 수 있다.
2. 작은 문제에서 구한 정답은 그것을 포함하는 큰 문제에서도 동일하다.

### 메모이제이션(Memoization)
- 다이나믹 프로그래밍을 구현하는 방법 중 한 종류
- 컴퓨터 프로그램이 동일한 계산을 반복해야 할 때, 이전에 계산한 값을 메모리에 저장함으로써 동일한 계산의 반복 수행을 제거하여 프로그램 실행 속도를 빠르게 하는 기술
- 동적 계획법의 핵심이 되는 기술이다. 
- 한 번 구한 결과를 메모리 공간에 메모해두고 같은 식을 다시 호출하면 메모한 결과를 그대로 가져오는 기법 
- 값을 저장하는 방법이므로 캐싱(Caching)이라고도 함
- 
#### 피보나치 수열
````python
# 피보나치 함수(Fibonacci Function)을 재귀함수로 구현
def fibo(x):
    if x == 1 or x == 2:
        return 1
    return fibo(x - 1) + fibo(x - 2)

print(fibo(4))
````
피보나치 수열을 재귀 함수로 사용하면 심각한 문제가 생길 수 있음.
f(n) 함수에서 n이 커지면 커질수록 수행 시간이 기하급수적으로 늘어나기 때문임. 이 소스코드의 시간 복잡도는 O(2^n)임.
f(6)을 호출할 때 동일한 함수가 반복적으로 호출되고 계속 호출할 때마다 계산함
이처럼 피보나치 수열의 점화식을 재귀 함수를 사용해 만들 수는 있지만, 단순히 매번 계산하도록 하면 문제를 효율적으로 해결할 수 없음. 
이러한 문제는 다이나믹 프로그래밍을 사용하면 효율적으로 해결할 수 있음
따라서,
다이나믹 프로그래밍을 재귀적으로 수행하는 것이 더 적절함

실제로 메모이제이션은 어떻게 구현될 수 있을까 : 한 번 구한 정보를 리스트에 저장하는 것. 다이나믹 프로그래밍을 재귀적으로 수행하다가 같은 정보가 필요할 때는 이미 구한 정답을 그대로 리스트에서 가져오면 됨
-> 같은 정보가 필요할 때는 이미 구한 정답을 그대로 리스트에서 가져오면 된다.

- `탑다운(Top-Down)방식`: `재귀 함수`를 이용하여 다이나믹 프로그래밍 소스코드를 작성하는 방법, 큰 문제를 해결하기 위해 작은 문제를 호출
- `보텀업(Bottom-Up)방식`: 단순히 `반복문`을 이용하여 소스코드를 작성하는 경우 작은 문제부터 차근차근 답을 도출

- 탑다운 방식 소스코드(재귀)
```python
# 한 번 계산된 결과를 메모이제이션(Memoization)하기 위한 리스트 초기화
d = [0] * 100

# 피보나치 함수(Fibonacci Function)를 재귀함수로 구현 (탑다운 다이나믹 프로그래밍)
def fibo(x):
    # 종료 조건(1 혹은 2일 때 1을 반환)
    if x == 1 or x == 2:
        return 1
    # 이미 계산한 적 있는 문제라면 그대로 반환
    if d[x] != 0:
        return d[x]
    # 아직 계산하지 않은 문제라면 점화식에 따라서 피보나치 결과 반환
    d[x] = fibo(x - 1) + fibo(x - 2)
    return d[x]

print(fibo(99))
```
- 보텀업 방식 소스코드(반복문)
```python
# 앞서 계산된 결과를 저장하기 위한 DP 테이블(보텀업 방식에서 사용되는 결과 저장용 리스트) 초기화
d = [0] * 100

# 첫 번째 피보나치 수와 두 번째 피보나치 수는 1
d[1] = 1
d[2] = 1
n = 99

# 피보나치 함수(Fibonacci Function) 반복문으로 구현(보텀업 다이나믹 프로그래밍)
for i in range(3, n + 1):
    d[i] = d[i - 1] + d[i - 2]

print(d[n])
```
다이나믹 프로그래밍을 적용했을 때의 피보나치 수열 알고리즘의 시간 복잡도는 O(N)

다이나믹 프로그래밍의 전형적인 형태는 `보텀업` 방식임.

보텀업 방식에서 사용되는 `결과 저장용 리스트`를 `DP 테이블`이라고 부르며, `메모이제이션`은 `탑다운` 방식에 국한되어 사용되는 표현임.

다이나믹 프로그래밍과 메모이제이션의 개념을 혼용해서 사용하는 경우도 있는데, 엄밀히 말하면 메모이제이션은 이전에 계산된 결과를 일시적으로 기록해 놓은 넓은 개념을 의미하므로, 다이나믹 프로그래밍과는 별도의 개념임. 한 번 계산된 결과를 어딘가에 담아 놓기만 하고 다이나믹 프로그래밍을 위해 활용하지 않을 수도 있음
수열은 배열이나 리스트로 표현할 수 있다로 했는데, 메모이제이션은 때에 따라서 다른 자료형, 예를 들어 사전(dict) 자료형을 이용할 수도 있음. 사전 자료형은 수열처럼 연속적이지 않은 경우에 유용한데, 예를 들어 a(n)을 계산하고자 할 때 a0~a(n-1) 모두가 아닌 일부의 작은 문제에 대한 해답만 필요한 경우가 존재할 수 있음. 이럴 때에는 사전 자료형을 사용하는게 더 효과적임

- 수열처럼 연속적이지 않은 경우에는 딕셔너리 자료형이 유용

# 다이나믹 프로그래밍 문제에 접근하는 방법
- 가장 먼저 그리디, 구현, 완전 탐색 등의 아이디어로 문제를 해결할 수 있는지 검토!
  - 다른 알고리즘으로 풀이방법이 떠오르지 않는다면 & 탐색 알고리즘으로 접근했을 때 시간이 매우 오래 걸리면 `다이나믹 프로그래밍`을 적용할 수 있는지 확인

- 단순히 `재귀 함수`로 비효율적인 프로그램을 작성한 뒤에 작은 문제에서 구한 답이 큰 문제에서 그대로 사용될 수 있으면, `코드 개선`
- 재귀 함수를 이용하는 탑다운 방식보다는 `보텀업` 방식으로 구현하는 것을 권장
    - 시스템상 재귀 함수의 스택 크기가 한정되어 있을 수 있기 때문(recursion depth error)
    - `sys`라이브러리에 포함되어 있는 `setrecursionlimit()`함수를 호출하여 재귀 제한 완화 가능(파이썬은 재귀함수 호출을 1000번 이하로 제한)
  ```python
  import sys
  sys.setrecursionlimit(10**8)
  ```

